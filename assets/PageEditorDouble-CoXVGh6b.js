const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lang-javascript-D3MFBucq.js","assets/codemirror-BQ8rGS-_.js","assets/lang-json-Bwr2_wZl.js","assets/lang-yaml-CxI4l9sE.js","assets/lang-sql-dNDqyQef.js","assets/papaparse.min-Cbrzdv4P.js","assets/sql-formatter-Mu3BzErD.js","assets/json-to-ts-Cn8d_Vgl.js","assets/core-HUgAg7iN.js","assets/js-base64-DJocLEku.js"])))=>i.map(i=>d[i]);
var E=Object.defineProperty;var S=(t,e,o)=>e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var h=(t,e,o)=>S(t,typeof e!="symbol"?e+"":e,o);import{_ as __vitePreload,E as EnumTools,l as localforage}from"./index-B7o1EJ0h.js";import{d as defineComponent,b as ref,j as onMounted,x as watch,y as onUnmounted,c as createElementBlock,f as createBaseVNode,l as useRoute,o as openBlock}from"./core-HUgAg7iN.js";import{E as EditorView,H as HighlightStyle,r as syntaxHighlighting,t as tags,u as EditorState,v as lineNumbers,w as history,x as bracketMatching,y as closeBrackets,z as autocompletion,A as crosshairCursor,B as highlightActiveLine,C as highlightActiveLineGutter,F as highlightSelectionMatches,G as keymap,J as closeBracketsKeymap,K as defaultKeymap,M as searchKeymap,O as historyKeymap,Q as foldKeymap}from"./codemirror-BQ8rGS-_.js";import"./sql-formatter-Mu3BzErD.js";function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var s in o)({}).hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},_extends.apply(null,arguments)}var createTheme=t=>{var{theme:e,settings:o={},styles:s=[]}=t,n={".cm-gutters":{}},r={};o.background&&(r.backgroundColor=o.background),o.backgroundImage&&(r.backgroundImage=o.backgroundImage),o.foreground&&(r.color=o.foreground),o.fontSize&&(r.fontSize=o.fontSize),(o.background||o.foreground)&&(n["&"]=r),o.fontFamily&&(n["&.cm-editor .cm-scroller"]={fontFamily:o.fontFamily}),o.gutterBackground&&(n[".cm-gutters"].backgroundColor=o.gutterBackground),o.gutterForeground&&(n[".cm-gutters"].color=o.gutterForeground),o.gutterBorder&&(n[".cm-gutters"].borderRightColor=o.gutterBorder),o.caret&&(n[".cm-content"]={caretColor:o.caret},n[".cm-cursor, .cm-dropCursor"]={borderLeftColor:o.caret});var l={};o.gutterActiveForeground&&(l.color=o.gutterActiveForeground),o.lineHighlight&&(n[".cm-activeLine"]={backgroundColor:o.lineHighlight},l.backgroundColor=o.lineHighlight),n[".cm-activeLineGutter"]=l,o.selection&&(n["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:o.selection+" !important"}),o.selectionMatch&&(n["& .cm-selectionMatch"]={backgroundColor:o.selectionMatch});var c=EditorView.theme(n,{dark:e==="dark"}),d=HighlightStyle.define(s),u=[c,syntaxHighlighting(d)];return u},defaultSettingsVscodeLight={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},vscodeLightStyle=[{tag:[tags.keyword,tags.operatorKeyword,tags.modifier,tags.color,tags.constant(tags.name),tags.standard(tags.name),tags.standard(tags.tagName),tags.special(tags.brace),tags.atom,tags.bool,tags.special(tags.variableName)],color:"#0000ff"},{tag:[tags.moduleKeyword,tags.controlKeyword],color:"#af00db"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName,tags.propertyName,tags.variableName,tags.labelName,tags.definition(tags.name)],color:"#0070c1"},{tag:tags.heading,fontWeight:"bold",color:"#0070c1"},{tag:[tags.typeName,tags.className,tags.tagName,tags.number,tags.changed,tags.annotation,tags.self,tags.namespace],color:"#267f99"},{tag:[tags.function(tags.variableName),tags.function(tags.propertyName)],color:"#795e26"},{tag:[tags.number],color:"#098658"},{tag:[tags.operator,tags.punctuation,tags.separator,tags.url,tags.escape,tags.regexp],color:"#383a42"},{tag:[tags.regexp],color:"#af00db"},{tag:[tags.special(tags.string),tags.processingInstruction,tags.string,tags.inserted],color:"#a31515"},{tag:[tags.angleBracket],color:"#383a42"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:[tags.meta,tags.comment],color:"#008000"},{tag:tags.link,color:"#4078f2",textDecoration:"underline"},{tag:tags.invalid,color:"#e45649"}];function vscodeLightInit(t){var{theme:e="light",settings:o={},styles:s=[]}={};return createTheme({theme:e,settings:_extends({},defaultSettingsVscodeLight,o),styles:[...vscodeLightStyle,...s]})}vscodeLightInit();var defaultSettingsVscodeDark={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},vscodeDarkStyle=[{tag:[tags.keyword,tags.operatorKeyword,tags.modifier,tags.color,tags.constant(tags.name),tags.standard(tags.name),tags.standard(tags.tagName),tags.special(tags.brace),tags.atom,tags.bool,tags.special(tags.variableName)],color:"#569cd6"},{tag:[tags.controlKeyword,tags.moduleKeyword],color:"#c586c0"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName,tags.propertyName,tags.variableName,tags.labelName,tags.definition(tags.name)],color:"#9cdcfe"},{tag:tags.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[tags.typeName,tags.className,tags.tagName,tags.number,tags.changed,tags.annotation,tags.self,tags.namespace],color:"#4ec9b0"},{tag:[tags.function(tags.variableName),tags.function(tags.propertyName)],color:"#dcdcaa"},{tag:[tags.number],color:"#b5cea8"},{tag:[tags.operator,tags.punctuation,tags.separator,tags.url,tags.escape,tags.regexp],color:"#d4d4d4"},{tag:[tags.regexp],color:"#d16969"},{tag:[tags.special(tags.string),tags.processingInstruction,tags.string,tags.inserted],color:"#ce9178"},{tag:[tags.angleBracket],color:"#808080"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:[tags.meta,tags.comment],color:"#6a9955"},{tag:tags.link,color:"#6a9955",textDecoration:"underline"},{tag:tags.invalid,color:"#ff0000"}];function vscodeDarkInit(t){var{theme:e="dark",settings:o={},styles:s=[]}={};return createTheme({theme:e,settings:_extends({},defaultSettingsVscodeDark,o),styles:[...vscodeDarkStyle,...s]})}var vscodeDark=vscodeDarkInit();const languageMap={javascript:async()=>(await __vitePreload(async()=>{const{javascript:t}=await import("./lang-javascript-D3MFBucq.js").then(e=>e.i);return{javascript:t}},__vite__mapDeps([0,1]))).javascript,json:async()=>(await __vitePreload(async()=>{const{json:t}=await import("./lang-json-Bwr2_wZl.js");return{json:t}},__vite__mapDeps([2,0,1]))).json,yaml:async()=>(await __vitePreload(async()=>{const{yaml:t}=await import("./lang-yaml-CxI4l9sE.js");return{yaml:t}},__vite__mapDeps([3,0,1]))).yaml,sql:async()=>(await __vitePreload(async()=>{const{sql:t}=await import("./lang-sql-dNDqyQef.js");return{sql:t}},__vite__mapDeps([4,1,0]))).sql,"text/plain":async()=>[]};async function createEditorState(t,e,{onchange:o}={onchange:()=>{}}){const n=await(languageMap[e]||languageMap["text/plain"])();return EditorState.create({doc:t,extensions:[lineNumbers(),history(),bracketMatching(),closeBrackets(),autocompletion(),crosshairCursor(),highlightActiveLine(),highlightActiveLineGutter(),highlightSelectionMatches(),n(),vscodeDark,keymap.of([...closeBracketsKeymap,...defaultKeymap,...searchKeymap,...historyKeymap,...foldKeymap]),EditorView.lineWrapping,EditorView.updateListener.of(r=>{r.docChanged&&o()})]})}function createEditorInstance(t,e,o){return new EditorView({state:e,parent:t,...o})}function addCommandSave(t,e){const o=s=>{(s.ctrlKey||s.metaKey)&&s.key==="s"&&(s.preventDefault(),e())};return t.dom.addEventListener("keydown",o),()=>t.dom.removeEventListener("keydown",o)}function jsonCompress(t){const e=JSON.parse(t);return JSON.stringify(e)}function jsonFlat(t,e=""){const o=JSON.parse(t),s={};function n(r,l,c){if(typeof r!="object"||r===null){c(l,r);return}for(const d in r)if(Object.prototype.hasOwnProperty.bind(r,d)){const u=l?`${l}.${d}`:d;n(r[d],u,c)}}return n(o,e,(r,l)=>{console.log(r,l),s[r]=l}),console.log("jsonFlat",s),JSON.stringify(s,null,2)}function jsonFormat(t){const e=JSON.parse(t);return JSON.stringify(e,null,2)}function parseJSON(t){if(typeof t=="string"&&(t.startsWith("{")||t.startsWith("[")))try{return parseJSON(JSON.parse(t))}catch(e){return console.error(e),t}else{if(Array.isArray(t))return t.map(e=>parseJSON(e));if(typeof t=="object"&&t!==null){for(const e in t)t[e]=parseJSON(t[e]);return t}else return t}}function jsonParseDeep(t){const e=parseJSON(t);return JSON.stringify(e,null,2)}function sortObject(t){return Object.keys(t).sort().reduce(function(e,o){return e[o]=typeof t[o]=="object"?sortObject(t[o]):t[o],e},{})}function jsonSort(t){return JSON.stringify(sortObject(JSON.parse(t)),null,2)}function modifyObject(t,e,o){const s=e.split(".");let n=t;return s.forEach((r,l)=>{l===s.length-1?n[r]=o:(n[r]={},n=n[r])}),t}function jsonNesting(t){const e=JSON.parse(t),o={};return Object.keys(e).forEach(s=>{modifyObject(o,s,e[s])}),JSON.stringify(o,null,2)}async function json2yaml(t){const e=JSON.parse(t);return(await __vitePreload(()=>import("./js-yaml-BHMgNpNm.js"),[])).dump(e)}async function yaml2json(t){const o=(await __vitePreload(()=>import("./js-yaml-BHMgNpNm.js"),[])).load(t);return JSON.stringify(o,null,2)}async function json2csv(t){const e=await __vitePreload(()=>import("./papaparse.min-Cbrzdv4P.js").then(s=>s.p),__vite__mapDeps([5,6])),o=JSON.parse(t);return e.unparse(o)}async function csv2json(t){const o=(await __vitePreload(()=>import("./papaparse.min-Cbrzdv4P.js").then(s=>s.p),__vite__mapDeps([5,6]))).parse(t,{header:!0});return JSON.stringify(o.data,null,2)}function object2Json(input){const object=eval(`(${input})`);return JSON.stringify(object,null,2)}function json2Object(t){return`const object = ${t};`}async function json2Ts(t){const{Json2Ts:e}=await __vitePreload(async()=>{const{Json2Ts:o}=await import("./json-to-ts-Cn8d_Vgl.js");return{Json2Ts:o}},__vite__mapDeps([7,8]));return new e().convert(t)}function cspParse(t){try{let e=t.trim();e.startsWith("Content-Security-Policy:")&&(e=e.replace("Content-Security-Policy:","").trim());const o={},s=e.split(";");for(const n of s){const r=n.trim();if(!r)continue;const l=r.split(/\s+/);if(l.length<1)continue;const c=l[0],d=l.slice(1),u=[];let g=null,m=null;for(const a of d)!g&&(a.startsWith("'")||a.startsWith('"'))?(m=a[0],a.endsWith(m)?u.push(a):g=a):g?a.endsWith(m)?(g+=" "+a,u.push(g),g=null,m=null):g+=" "+a:u.push(a);u.length>0&&(o[c]=u)}return JSON.stringify(o,null,2)}catch(e){throw new Error(`CSP解析失败: ${e instanceof Error?e.message:"未知错误"}`)}}function cspUnparse(t){try{const e=JSON.parse(t),o=[];for(const[n,r]of Object.entries(e))if(Array.isArray(r)&&r.length>0){const l=`${n} ${r.join(" ")}`;o.push(l)}return`Content-Security-Policy: ${o.join("; ")}`}catch(e){throw new Error(`CSP逆解析失败: ${e instanceof Error?e.message:"未知错误"}`)}}function httpCacheAnalyze(t){try{const e={summary:"",details:[],headers:{}},o={},s=t.trim().split(`
`);for(const a of s){const i=a.match(/^([^:]+):\s*(.*)$/);if(i){const[,f,p]=i;o[f.toLowerCase()]=p}}const n=o["cache-control"]||"",r=o.expires||"",l=o["last-modified"]||"",c=o.etag||"";e.headers={"Cache-Control":n,Expires:r,"Last-Modified":l,ETag:c};const d=[];let u="无缓存",g="";if(n){const a=n.split(",").map(i=>i.trim());if(a.includes("no-store"))d.push("设置了 no-store: 不允许缓存任何响应内容"),u="禁止缓存";else if(a.includes("no-cache"))d.push("设置了 no-cache: 可以缓存，但使用前必须验证有效性"),u="验证缓存";else{const i=a.find(p=>p.startsWith("max-age="));if(i){const p=parseInt(i.split("=")[1]);g=formatDuration$1(p),d.push(`设置了 Cache-Control: Max-Age=${p} - 响应可以缓存 ${g}`),u="强缓存"}const f=a.find(p=>p.startsWith("s-maxage="));if(f){const p=parseInt(f.split("=")[1]);d.push(`设置了 s-maxage=${p}: 共享缓存可以缓存 ${formatDuration$1(p)}`)}a.includes("public")?d.push("设置了 public: 响应可以被任何缓存存储"):a.includes("private")&&d.push("设置了 private: 响应只能被单个用户的浏览器缓存")}}if(r&&u!=="禁止缓存")try{const a=new Date(r),i=new Date,f=Math.floor((a.getTime()-i.getTime())/1e3);f>0?(d.push(`设置了 Expires: 响应将在 ${r} 过期（${formatDuration$1(f)}后）`),u==="无缓存"&&(u="强缓存",g=formatDuration$1(f))):d.push(`设置了 Expires: 响应已过期（过期时间：${r}）`)}catch(a){d.push(`Expires 日期格式无效: ${r} ${a instanceof Error?a.message:"未知错误"}`)}(l||c)&&u!=="禁止缓存"&&(u==="无缓存"&&(u="验证缓存"),l&&d.push(`设置了 Last-Modified: 服务器资源最后修改时间为 ${l}`),c&&d.push(`设置了 ETag: 资源标识为 ${c}`));let m=`缓存策略: ${u}`;return g&&(m+=`，有效期: ${g}`),u==="验证缓存"&&(m+="。使用前需要向服务器验证资源是否发生变化。"),e.summary=m,e.details=d,JSON.stringify(e,null,2)}catch(e){throw new Error(`HTTP缓存解读失败: ${e instanceof Error?e.message:"未知错误"}`)}}function formatDuration$1(t){if(t<60)return`${t} 秒`;if(t<3600){const e=Math.floor(t/60),o=t%60;return o>0?`${e} 分 ${o} 秒`:`${e} 分`}else if(t<86400){const e=Math.floor(t/3600),o=Math.floor(t%3600/60);return o>0?`${e} 小时 ${o} 分`:`${e} 小时`}else{const e=Math.floor(t/86400),o=Math.floor(t%86400/3600);return o>0?`${e} 天 ${o} 小时`:`${e} 天`}}function httpCorsAnalyze(t){try{const e={summary:"",details:[],headers:{}},o={},s=t.trim().split(`
`);for(const a of s){const i=a.match(/^([^:]+):\s*(.*)$/);if(i){const[,f,p]=i;o[f.toLowerCase()]=p}}const n=o["access-control-allow-origin"]||"",r=o["access-control-allow-methods"]||"",l=o["access-control-allow-headers"]||"",c=o["access-control-allow-credentials"]||"",d=o["access-control-expose-headers"]||"",u=o["access-control-max-age"]||"";e.headers={"Access-Control-Allow-Origin":n,"Access-Control-Allow-Methods":r,"Access-Control-Allow-Headers":l,"Access-Control-Allow-Credentials":c,"Access-Control-Expose-Headers":d,"Access-Control-Max-Age":u};const g=[];let m="未设置CORS";if(n?(m="允许跨域",n==="*"?g.push("设置了 Access-Control-Allow-Origin: * - 允许所有域名跨域访问"):g.push(`设置了 Access-Control-Allow-Origin: ${n} - 仅允许指定域名跨域访问`)):g.push("未设置 Access-Control-Allow-Origin - 不允许跨域访问"),r){const a=r.split(",").map(i=>i.trim());g.push(`设置了 Access-Control-Allow-Methods: ${a.join(", ")} - 允许的HTTP方法`)}if(l){const a=l.split(",").map(i=>i.trim());g.push(`设置了 Access-Control-Allow-Headers: ${a.join(", ")} - 允许的自定义请求头`)}if(c==="true"&&(g.push("设置了 Access-Control-Allow-Credentials: true - 允许携带凭证（如Cookie）跨域"),n==="*"&&g.push("⚠️ 警告: 当设置了credentials=true时，Access-Control-Allow-Origin不能为*，这会导致跨域失败")),d){const a=d.split(",").map(i=>i.trim());g.push(`设置了 Access-Control-Expose-Headers: ${a.join(", ")} - 允许前端获取的响应头`)}if(u){const a=parseInt(u);g.push(`设置了 Access-Control-Max-Age: ${a} - 预检请求结果的缓存时间为${formatDuration(a)}`)}return e.summary=`跨域状态: ${m}`,m==="允许跨域"&&c==="true"&&(e.summary+="，允许携带凭证"),e.details=g,JSON.stringify(e,null,2)}catch(e){throw new Error(`HTTP跨域解读失败: ${e instanceof Error?e.message:"未知错误"}`)}}function formatDuration(t){if(t<60)return`${t}秒`;if(t<3600){const e=Math.floor(t/60),o=t%60;return o>0?`${e}分${o}秒`:`${e}分`}else if(t<86400){const e=Math.floor(t/3600),o=Math.floor(t%3600/60);return o>0?`${e}小时${o}分`:`${e}小时`}else{const e=Math.floor(t/86400),o=Math.floor(t%86400/3600);return o>0?`${e}天${o}小时`:`${e}天`}}async function sqlFormat(t){const{format:e}=await __vitePreload(async()=>{const{format:o}=await import("./sql-formatter-Mu3BzErD.js").then(s=>s.i);return{format:o}},[]);return e(t,{language:"sql",tabWidth:2,keywordCase:"upper",dataTypeCase:"upper",functionCase:"lower",logicalOperatorNewline:"after",expressionWidth:120,linesBetweenQueries:1})}async function sqlCompress(t){try{if(!t||t.trim()==="")return"";let e=await sqlFormat(t);e=e.replace(/\/\*[\s\S]*?\*\//g,""),e=e.replace(/--.*$/gm,"");const o=[];return e=e.replace(/'(?:[^'\\]|\\.)*'/g,s=>{const n=`__STRING_PLACEHOLDER_${o.length}__`;return o.push(s),n}),e=e.replace(/[\n\t\r]+/g," "),e=e.replace(/\s+/g," "),e=e.trim(),o.forEach((s,n)=>{e=e.replace(`__STRING_PLACEHOLDER_${n}__`,s)}),e}catch(e){throw console.error("SQL压缩失败:",e),new Error(`SQL压缩失败: ${e instanceof Error?e.message:"未知错误"}`)}}async function encodeBase64(t){const{encode:e}=await __vitePreload(async()=>{const{encode:o}=await import("./js-base64-DJocLEku.js");return{encode:o}},__vite__mapDeps([9,8]));return e(t)}async function decodeBase64(t){const{decode:e}=await __vitePreload(async()=>{const{decode:o}=await import("./js-base64-DJocLEku.js");return{decode:o}},__vite__mapDeps([9,8]));return e(t)}function sizeofByte(t){let e=0,o=0;for(let s=0,n=t.length;s<n;){const r=t.codePointAt(s);r<=127?e+=1:r<=2047?e+=2:r<=65535?e+=3:e+=4,r<=65535?(o+=2,s++):(o+=4,s+=2)}return JSON.stringify({chars:t.length,utf8Bytes:e,utf16Bytes:o},null,2)}function textSort(t){return t.split(`
`).filter(e=>e.trim()!=="").sort((e,o)=>e.localeCompare(o)).join(`
`)}function textSplit(t,e){return JSON.stringify(t.split(e),null,2)}function semiSplit(t){return textSplit(t,";")}function commaSplit(t){return textSplit(t,",")}function lineSplit(t){return textSplit(t,`
`)}function urlEncode(t){try{return encodeURIComponent(t)}catch(e){throw new Error(`URL编码失败: ${e instanceof Error?e.message:"未知错误"}`)}}function urlDecode(t){try{return decodeURIComponent(t)}catch(e){throw new Error(`URL解码失败: ${e instanceof Error?e.message:"未知错误"}`)}}function urlParse(t){var l,c;const e=new URL(t),o={};e.searchParams.forEach((d,u)=>{o[u]=d});const n=e.hash.match(/#(?<path>\/[^\?]*)/),r=e.hash.match(/#.*(?<search>\?.*)/);return console.log(r),JSON.stringify({href:e.href,protocol:e.protocol,host:e.host,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search,searchParams:o,hash:e.hash,hashPath:(l=n==null?void 0:n.groups)==null?void 0:l.path,hashSearch:(c=r==null?void 0:r.groups)==null?void 0:c.search},null,2)}const methodMap={[EnumTools.JSON_COMPRESS]:jsonCompress,[EnumTools.JSON_FORMAT]:jsonFormat,[EnumTools.JSON_PARSE_DEEP]:jsonParseDeep,[EnumTools.JSON_SORT]:jsonSort,[EnumTools.JSON_FLAT]:jsonFlat,[EnumTools.JSON_NESTING]:jsonNesting,[EnumTools.JSON_TO_CSV]:json2csv,[EnumTools.CSV_TO_JSON]:csv2json,[EnumTools.JSON_TO_TS]:json2Ts,[EnumTools.JSON_TO_YAML]:json2yaml,[EnumTools.YAML_TO_JSON]:yaml2json,[EnumTools.OBJ_TO_JSON]:object2Json,[EnumTools.JSON_TO_OBJ]:json2Object,[EnumTools.TEXT_DIFF]:t=>t,[EnumTools.TEXT_SORT]:textSort,[EnumTools.TEXT_SIZE]:sizeofByte,[EnumTools.REGEX_TEST]:t=>t,[EnumTools.URL_PARSE]:urlParse,[EnumTools.URL_ENCODE]:urlEncode,[EnumTools.URL_DECODE]:urlDecode,[EnumTools.CSP_PARSE]:cspParse,[EnumTools.CSP_UNPARSE]:cspUnparse,[EnumTools.HTTP_CACHE_ANALYZE]:httpCacheAnalyze,[EnumTools.HTTP_CORS_ANALYZE]:httpCorsAnalyze,[EnumTools.BASE64_ENCODE]:encodeBase64,[EnumTools.BASE64_DECODE]:decodeBase64,[EnumTools.SQL_FORMAT]:sqlFormat,[EnumTools.SQL_COMPRESS]:sqlCompress,[EnumTools.SEMI_SPLIT]:semiSplit,[EnumTools.COMMA_SPLIT]:commaSplit,[EnumTools.LINE_SPLIT]:lineSplit};async function processContent(t,e){if(!methodMap[e])throw new Error(`Unsupported type: ${e}`);return await methodMap[e](t)}class EditorManager{static addEditor(e){this.editorList.push(e)}static dispose(){this.editorList.forEach(e=>{e.destroy()}),this.editorList=[]}}h(EditorManager,"editorList",[]);const _hoisted_1={id:"editor-double",class:"page-editor-double"},codeJsonCompress=`{
  "foo": "bar",
  "hello": "world"
}`,codeJsonFormat='{"foo":"bar","hello":"world"}',codeJsonParser='{"d":"{\\"c\\":\\"{\\\\\\"b\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"a\\\\\\\\\\\\\\":1}\\\\\\"}\\"}"}',codeJsonSort=`{
  "foo": "bar",
  "hello": "world",
  "a": 1,
  "d": 2,
  "c": 1,
  "b": {
    "c": 3,
    "b": 2,
    "a": 1
  }
}`,codeJson2Ts=`{
  "foo":"bar",
  "hello":"world",
  "test": {
    "a": 1
  }
}`,codeJsonFlat=`{
  "a1": {
    "a2": 1
  },
  "b1": {
    "a2": 2
  },
  "c1": {
    "a2": 3
  }
}`,codeJsonNesting=`{
  "a1.a2": 1,
  "b1.a2": 2,
  "c1.a2": 3
}`,codeJsonYaml=`{
  "name": "张三",
  "age": 30,
  "address": {
    "street": "人民路",
    "city": "北京"
  },
  "hobbies": ["阅读", "游泳"]
}`,codeYamlJson=`name: 张三
age: 30
address:
  street: 人民路
  city: 北京
hobbies:
  - 阅读
  - 游泳
`,codeJsonCsv=`[{
  "a1": 1,
  "a2": 2,
  "a3": 3
}]`,codeCsvJson=`Column 1,Column 2,Column 3,Column 4
1-1,1-2,1-3,1-4
2-1,2-2,2-3,2-4
3-1,3-2,3-3,3-4
4,5,6,7`,codeObjectJson=`{
  a: 1,
  b: 2,
  c: 3
}`,codeJson2Obj=`{
  "a": 1,
  "b": 2,
  "c": 3
}`,codeSize=`计算字符串所占的内存字节数，
使用 UTF-8 和 UTF-16 的编码方式计算。
UTF-8 和 UTF-16 都是 Unicode 标准的字符编码方案，
但它们的设计选择导致了截然不同的特性和适用场景。
  - UTF-8 使用 1 到 4 个字节 的变长编码来表示一个字符。核心特点：向后兼容 ASCII。
  - UTF-16 使用 2 或 4 个字节 的变长编码来表示一个字符。核心特点：表示非 ASCII 字符通常只需要 2 个字节。
对于 CJK 文本（中文/日文/韩文），UTF-8 通常需要 3 个字节来表示一个字符，而 UTF-16 通常只需要 2 个字节。
对于英文文本，UTF-8 通常需要只需要 1 个字节，而 UTF-16 通常需要 2 个字节来表示一个字符。
因此，在英文文本中，UTF-8 通常是更节省空间的选择，而在 CJK 文本中，UTF-16 通常是更节省空间的选择。
由于 UTF-8 兼容 ASCII，因此在绝大多数现代应用中，UTF-8 是默认选择。`,codeTextSort=`3. 按字典序排序
1. 对文本进行排序
2. 每行一个字符串
`,codeBase64Encode="你好世界",codeBase64Decode="5L2g5aW95LiW55WM",codeUrlEncode="你好世界",codeUrlDecode="%E4%BD%A0%E5%A5%BD%E4%B8%96%E7%95%8C",codeCspParse="Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' cdn.example.com; style-src 'self' fonts.example.com; img-src 'self' data: example.com; font-src 'self' data: fonts.example.com; form-action 'self'",codeCspUnparse=`{
  "default-src": ["'self'"],
  "script-src": ["'self'","'unsafe-inline'", "'unsafe-eval'", "cdn.example.com"],
  "style-src": ["'self'", "fonts.example.com"],
  "img-src": ["'self'", "data:", "example.com"],
  "font-src": ["'self'", "data:", "fonts.example.com"],
  "form-action": ["'self'"]
}`,codeHttpCacheAnalyze=`Content-Type: text/html
Content-Length: 1024
Date: Tue, 22 Feb 2022 22:22:22 GMT
Cache-Control: max-age=604800`,codeHttpCorsAnalyze=`Content-Type: application/json
Content-Length: 123
Access-Control-Allow-Origin: https://example.com
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Content-Type, Authorization, X-Requested-With
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: X-Custom-Header, X-Another-Header
Access-Control-Max-Age: 86400`,codeSqlFormat="SELECT id, name, email, created_at FROM users WHERE status = 'active' AND created_at > '2023-01-01' ORDER BY created_at DESC LIMIT 10;",codeSqlCompress=`SELECT 
  id, 
  name, 
  email, 
  created_at 
FROM 
  users 
WHERE 
  status = 'active' 
  AND created_at > '2023-01-01' 
ORDER BY 
  created_at DESC 
LIMIT 10;`,codeSemiSplit="localhost;127.*;10.*;192.168.*",codeCommaSPlit="a,b,c",codeLineSplit=`a
b
c
d
e
f`,_sfc_main=defineComponent({__name:"PageEditorDouble",setup(t){const e=ref(),o=ref();let s=null,n=null,r="javascript",l="javascript";const c=useRoute();async function d(){const m=s?s.state.doc.toString():"",a=`code-tools-${String(c.name)}`;await localforage.setItem(a,m)}async function u(){const m=`code-tools-${String(c.name)}`;await localforage.getItem(m).then(async a=>{c.name==EnumTools.YAML_TO_JSON?(r="yaml",l="javascript"):c.name==EnumTools.JSON_TO_YAML?(r="javascript",l="yaml"):(r="javascript",l="javascript");let i="";if(c.name==EnumTools.YAML_TO_JSON?i=a||codeYamlJson:c.name==EnumTools.JSON_TO_YAML?i=a||codeJsonYaml:c.name==EnumTools.JSON_COMPRESS?i=a||codeJsonCompress:c.name==EnumTools.JSON_FORMAT?i=a||codeJsonFormat:c.name==EnumTools.JSON_PARSE_DEEP?i=a||codeJsonParser:c.name==EnumTools.JSON_SORT?i=a||codeJsonSort:c.name==EnumTools.JSON_TO_TS?i=a||codeJson2Ts:c.name==EnumTools.JSON_FLAT?i=a||codeJsonFlat:c.name==EnumTools.JSON_NESTING?i=a||codeJsonNesting:c.name==EnumTools.JSON_TO_CSV?i=a||codeJsonCsv:c.name==EnumTools.CSV_TO_JSON?i=a||codeCsvJson:c.name==EnumTools.OBJ_TO_JSON?i=a||codeObjectJson:c.name==EnumTools.JSON_TO_OBJ?i=a||codeJson2Obj:c.name==EnumTools.TEXT_SIZE?i=codeSize:c.name==EnumTools.TEXT_SORT?i=codeTextSort:c.name==EnumTools.URL_PARSE?i=window.location.href:c.name==EnumTools.BASE64_ENCODE?i=codeBase64Encode:c.name==EnumTools.BASE64_DECODE?i=codeBase64Decode:c.name==EnumTools.URL_ENCODE?i=codeUrlEncode:c.name==EnumTools.URL_DECODE?i=codeUrlDecode:c.name==EnumTools.CSP_PARSE?i=codeCspParse:c.name==EnumTools.CSP_UNPARSE?i=codeCspUnparse:c.name==EnumTools.HTTP_CACHE_ANALYZE?i=codeHttpCacheAnalyze:c.name==EnumTools.HTTP_CORS_ANALYZE?i=codeHttpCorsAnalyze:c.name==EnumTools.SQL_FORMAT?i=codeSqlFormat:c.name==EnumTools.SQL_COMPRESS?i=codeSqlCompress:c.name==EnumTools.SEMI_SPLIT?i=codeSemiSplit:c.name==EnumTools.COMMA_SPLIT?i=codeCommaSPlit:c.name==EnumTools.LINE_SPLIT&&(i=codeLineSplit),s){const f=await createEditorState(i,r,{onchange:g});s.setState(f)}})}async function g(){if(!s)return;const m=s.state.doc.toString(),a=c.name;try{const i=await processContent(m,a),f=await createEditorState(i,l);n==null||n.setState(f)}catch(i){const f=await createEditorState(i.message,l);n==null||n.setState(f)}}return onMounted(async()=>{const m=await createEditorState("",r,{onchange:g}),a=await createEditorState("",l);!e.value||!o.value||(s=createEditorInstance(e.value,m),n=createEditorInstance(o.value,a),EditorManager.addEditor(s),EditorManager.addEditor(n),await u(),g(),addCommandSave(s,async()=>{d(),g()}))}),watch(c,async()=>{await u(),g()}),onUnmounted(()=>{EditorManager.dispose()}),(m,a)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",{ref_key:"editor1Container",ref:e,class:"container editor-container"},null,512),createBaseVNode("div",{ref_key:"editor2Container",ref:o,class:"container editor-container"},null,512)]))}});export{_sfc_main as default};
